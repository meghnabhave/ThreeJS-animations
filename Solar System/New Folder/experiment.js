var helpContent;
function initialiseHelp(){helpContent="";helpContent+="<h2>Solar System help</h2>";helpContent+="<h3>About the experiment</h3>";helpContent+="<p>The experiment shows the sun and 8 planets revolving around the sun.</p>";helpContent+="<p>In the animation stage, the planets revolves around the sun with their respective speeds and rotates about their respective axes.</p>";helpContent+="<p>On clicking on a planet, the display panel gets updated with the planets information.</p>";helpContent+="<p>The display panel above shows: </p>";
helpContent+="<ul> <li><b>Name</b> : Name of the planet.</li>";helpContent+="<li><b>Distance from Sun</b> : Distance of the planet from the sun in AU (Astronimical units)</li>";helpContent+="<li><b>Orbital Time</b> : Time period of revolution around sun in earth years.</li></ul>";helpContent+="<p>You can zoom in/zoom out using the buttons provided in the right upper corner.</p>";helpContent+="<p>You can go back to the setup stage by pressing the reset button.</p>";helpContent+="<h2>Happy Experimenting!</h2>";
PIEupdateHelp(helpContent)}var infoContent;
function initialiseInfo(){infoContent="";infoContent+="<h2>Solar System concepts</h2>";infoContent+="<h3>About the experiment</h3>";infoContent+="<p>>The experiment shows the sun and 8 planets revolving around the sun.</p>";infoContent+="<h3>Sun</h3>";infoContent+="<p>The sun shown in the animation is very small, if made to scale, the planets will appear to be point objects. The actual size of sun to the chosen scale of the animation is 10,000 times larger than the assumed size.</p>";infoContent+=
"<h3>Some Facts: </h3>";infoContent+="<p>Planets revolve around the sun due to the centripetal acceleration provided by the sun's gravitational force on the planets.</p>";infoContent+="<p>Jupiter is the largest planet in the solar system, followed by Saturn.</p>";infoContent+="<h3>Units: </h3>";infoContent+="<p><b>Astronomical Units(AU) :</b>Astronomical Units is the unit of measurement of distance of a planet from the sun. 1AU is the distance of earth from the sun.</p>";infoContent+="<p><b>Earth Year or year :</b>It is a unit of measuring time. 1 year is equal to the time taken by the earth to revolve around the sun. 1 year = 365 days.</p>";
infoContent+="<h2>Happy Experimenting!</h2>";PIEupdateInfo(infoContent)}var sunRadius,saturnRing,uranusRing,asteroidBeltRadius,planets=[],planetRadius,planetsOrbitX,planetsOrbitY,planetsSpeed,textures;
function initialise(){sunRadius=.53;PIEsetAreaOfInterest(-600,200,600,-200);PIEadjustCamera(0,0,1E3);PIEcameraZ=1E3;var a=(new THREE.TextureLoader).load("images/mercurymap.jpg"),c=(new THREE.TextureLoader).load("images/venusmap.jpg"),b=(new THREE.TextureLoader).load("images/earth.jpg"),d=(new THREE.TextureLoader).load("images/marsmap1k.jpg"),e=(new THREE.TextureLoader).load("images/jupitermap.jpg"),f=(new THREE.TextureLoader).load("images/saturnmap.jpg"),g=(new THREE.TextureLoader).load("images/uranusmap.jpg"),
h=(new THREE.TextureLoader).load("images/neptunemap.jpg");planetRadius=[7.48683936,10.65434832,12.901896,13.340944,29.256,25.811,19.6524,18.8892];planetsOrbitX=[15.89566038,44.62509754,80.5703978,146.198472,204.338691,285.662421,389.698886,486.3801096];planetsOrbitY=[4.949753223,13.46681671,24.26010231,40.20263178,57.83318778,80.97594694,108.438,146.5185883];planetsSpeed=[.25069,.185606,.2014,.127571,.069271,.051357,.03604,.028779];textures=[a,c,b,d,e,f,g,h];asteroidBeltRadius=156}
function MakeOrbit(a,c){var b=new THREE.EllipseCurve(0,0,a,c,0,2*Math.PI,!1),b=(new THREE.Path(b.getPoints(5E5))).createPointsGeometry(5E4),d=new THREE.LineBasicMaterial({color:16777215}),b=new THREE.Line(b,d);PIEaddElement(b);console.log("ellipse")}function makeSun(){var a=new THREE.SphereBufferGeometry(sunRadius,15,15),c=new THREE.MeshBasicMaterial({map:(new THREE.TextureLoader).load("images/sun.jpg")});sun=new THREE.Mesh(a,c);sun.position.set(0,0,0);PIEaddElement(sun)}
function makePlanets(){var a;for(a=0;8>a;a++){MakeOrbit(planetsOrbitX[a],planetsOrbitY[a]);var c=new THREE.SphereBufferGeometry(planetRadius[a],15,15),b=new THREE.MeshBasicMaterial({map:textures[a]});planets[a]=new THREE.Mesh(c,b);planets[a].rotation.set(0,.4101,0);planets[a].position.set(planetsOrbitX[a],0,0);PIEaddElement(planets[a])}a=(new THREE.TextureLoader).load("images/uranusringcolour.jpg");uranusRing=makeRing(planetRadius[6]+2,planetRadius[6]+7,a);uranusRing.position.set(planetsOrbitX[6],
0,0);uranusRing.rotation.set(Math.PI/2-.2,0,0);PIEaddElement(uranusRing);a=(new THREE.TextureLoader).load("images/saturnringcolor.jpg");saturnRing=makeRing(planetRadius[5]+2,planetRadius[5]+8,a);saturnRing.position.set(planetsOrbitX[5],0,0);saturnRing.rotation.set(Math.PI/2-.2,0,0);PIEaddElement(saturnRing)}function makeRing(a,c,b){a=new THREE.RingGeometry(a,c,3E4);b=new THREE.MeshPhongMaterial({map:b,bumpMap:b,bumpScale:.05});return new THREE.Mesh(a,b)}
function zoomIn(){PIEcamera.position.z-=50;10>PIEcamera.position.z&&(PIEcamera.position.z=10)}function zoomOut(){1E3>PIEcamera.position.z&&(PIEcamera.position.z+=50);1E3<PIEcamera.position.z&&(PIEcamera.position.z=1E3)}var mouse=new THREE.Vector2,raycaster;
function onDocumentMouseDown(a){raycaster=new THREE.Raycaster;a.preventDefault();mouse.x=a.clientX/window.innerWidth*2-1;mouse.y=2*-(a.clientY/window.innerHeight)+1;raycaster.setFromCamera(mouse,PIEcamera);a=raycaster.intersectObjects(PIEscene.children);if(0<a.length){a=a[0].object;var c,b;b=-1;for(c=0;8>c;c++)a==planets[c]&&(b=c);switch(b){case -1:a="None:";b=c="None";break;case 0:a="Mercury";c="0.39 AU";b="88 days";break;case 1:a="Venus";c="0.723 AU";b="225 days";break;case 2:a="Earth";c="1 AU";
b="365 days";break;case 3:a="Mars";c="1.524 AU";b="687 days";break;case 4:a="Jupiter";c="5.203 AU";b="12 years";break;case 5:a="Saturn";c="9.6 AU";b="29 years";break;case 6:a="Uranus";c="19.18 AU";b="84 years";break;case 7:a="Neptune";c="30.06 AU";b="165 years";break;default:a="Not found",b=c="None"}displayPlanet(a,c,b)}}function displayPlanet(a,c,b){PIEchangeDisplayText("Name",a);PIEchangeDisplayText("Distance from Sun",c);PIEchangeDisplayText("Orbital time",b)}
function Windowresize(){PIEresize();PIEadjustCamera(0,0,1E3);PIEadjustDisplayScene()}
function loadExperimentElements(){PIEsetExperimentTitle("Solar System");PIEsetDeveloperName("Meghna Bhave");initialiseHelp();initialiseInfo();PIEscene.background=(new THREE.TextureLoader).load("images/galaxy.jpg");initialise();makeSun();makePlanets();PIEaddDualCommand("Zoom in",zoomIn);PIEaddDualCommand("Zoom out",zoomOut);PIEaddDisplayText("Name","None");PIEaddDisplayText("Distance from Sun","None");PIEaddDisplayText("Orbital time","None");PIEadjustCamera(0,0,1E3);window.addEventListener("resize",
Windowresize,!1)}function resetExperiment(){initialise();var a;for(a=0;8>a;a++)planets[a].position.set(planetsOrbitX[a],0,0);uranusRing.position.set(planetsOrbitX[6],0,0);saturnRing.position.set(planetsOrbitX[5],0,0)}
function updateExperimentElements(a,c){window.addEventListener("mousedown",onDocumentMouseDown,!1);a/=1E3;var b;for(b=0;8>b;b++)planets[b].position.x=planetsOrbitX[b]*Math.cos(planetsSpeed[b]*a),planets[b].position.y=planetsOrbitY[b]*Math.sin(planetsSpeed[b]*a);saturnRing.position.x=planetsOrbitX[5]*Math.cos(planetsSpeed[5]*a);saturnRing.position.y=planetsOrbitY[5]*Math.sin(planetsSpeed[5]*a);uranusRing.position.x=planetsOrbitX[6]*Math.cos(planetsSpeed[6]*a);uranusRing.position.y=planetsOrbitY[6]*
Math.sin(planetsSpeed[6]*a)};
